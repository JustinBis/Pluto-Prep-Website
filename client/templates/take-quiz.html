<!-- The page served to the "/quiz/:_id" route -->
<template name="takeQuiz">
	<!-- Full page container -->
	<div class="full-page takeQuiz blue-background">

		{{#if questions}}
		<div class="container">
			<!-- Show the progress and a timer -->
			<div class="row progress-container">
				<div id="my-progress" class="col-xs-4 quiz-progress-bubbles text-center">
					{{#each questions}}
						<!-- Style with my answer helper -->
						<span class="{{myProgress number}}">
							{{number}}
						</span>
					{{/each}}
				</div>
				<div class="col-xs-4 text-center time-remaining">
					Time remaining: {{minutesRemaining}}:{{secondsRemaining}}
				</div>
				<div id="opponent-progress" class="col-xs-4 quiz-progress-bubbles text-center">
					<span>1</span>
					<span>2</span>
					<span>3</span>
					<span>4</span>
					<span>5</span>
					<span>6</span>
				</div>
			</div>

			<!-- Show the questions -->
			<div class="row">
				<div class="quiz-questions-row-container quiz-horizontal-scroll" style="{{questionContainerScroll}}">

					{{#each questions}}
					<div class="quiz-questions-col-container">
						<div class="col-xs-10 col-xs-offset-1">
							{{> questionTemplate}}
						</div>
					</div>
					{{/each}}

				</div>
			</div>
		</div>

		{{else}}

		<!-- If there are no questions, show an error -->
		<div class="row error-container">
			<div class="col-xs-12 text-center">
				<h1>Sorry, there was an error loading this quiz</h1>
				<h3>
					<!-- Offer a way back -->
					<button id="new-quiz-button" class="btn btn-lg sign-in-button">
							Make a new quiz
					</button>
				</h3>
			</div>
		</div>
		{{/if}}

		<div class="text-center">
		<h3> Debug Info </h3>
			<p>
				p1_id: {{p1_id}}
				<br />
				{{#if serverError}}
					Error: {{serverError}}
					<br />
				{{/if}}

				P1 Progress: {{p1_num_answered}}
				<br />
				P2 Progress: {{p2_num_answered}}
				<br />

				That's all!
			</p>
		</div>
	</div>
</template>

<!-- The question template -->
<template name="questionTemplate">
<div class="row text-center">
	<!-- Use the result to style this template -->
	<div class="col-xs-12 question-container effect6 {{myProgress number}}">
		<span class="question-text">
			{{question}}
		</span>

		<ul class="row row-eq-height list-inline list-group question-answers">
			<li class="col-xs-12 col-sm-6 list-group-item {{isAnswer 'a'}}" data-answer="a">
				<span>A</span> {{a}}
			</li>
			<li class="col-xs-12 col-sm-6 list-group-item {{isAnswer 'b'}}" data-answer="b">
				<span>B</span> {{b}}
			</li>
			<div class="clearfix visible-sm-block"></div>
			<li class="col-xs-12 col-sm-6 list-group-item {{isAnswer 'c'}}" data-answer="c">
				<span>C</span> {{c}}
				</li>
			<li class="col-xs-12 col-sm-6 list-group-item {{isAnswer 'd'}}" data-answer="d">
				<span>D</span> {{d}}
			</li>
		</ul>

		<!-- Show the button if this question has been answered -->
		{{#if myProgress number}}
		<button class="btn btn-lg next-question-button">
			Next Question
		</button>
		{{/if}}
	</div>
</div>
</template>