<!-- The page served to the "/quiz/:_id" route -->
<template name="takeQuiz">
	<!-- Full page container -->
	<div class="full-page takeQuiz slate-background">

		{{#if questions}}
		<div class="section">
		<div class="container">
			<!-- Show the progress and a timer -->
			<div class="row progress-container">
				<div id="my-progress" class="col-xs-4 quiz-progress-bubbles text-center">
					{{#each questions}}
						<!-- Style with my answer helper -->
						<span class="{{wasQuestionAnsweredCorrectly}}">
							{{number}}
						</span>
					{{/each}}
				</div>
				<div class="col-xs-4 text-center time-remaining">
					{{minutesRemaining}}:{{secondsRemaining}}
				</div>
				<div id="opponent-progress" class="col-xs-4 quiz-progress-bubbles text-center">
					{{#each questions}}
						<!-- Show opponent progress -->
						<span class="{{opponentQuestionAnsweredCorrectly}}">
							{{number}}
						</span>
					{{/each}}
				</div>
			</div>
		</div> <!-- /container -->
		</div>

		<div class="section white-bg">
		<div class="container">

			<!-- Show the questions -->
			<div class="row">
				<div class="quiz-questions-row-container quiz-horizontal-scroll" style="{{questionContainerScroll}}">

					{{#each questions}}
					<div class="quiz-questions-col-container">
						<div class="col-xs-10 col-xs-offset-1">
							{{> questionTemplate}}
						</div>
					</div>
					{{/each}}
					<!-- Show the end card -->
					<div class="quiz-questions-col-container">
						<div class="col-xs-10 col-xs-offset-1">
							{{> quizEndCard}}
						</div>
					</div>

				</div>
			</div>
		</div>
		</div>

		{{else}}

		<!-- If there are no questions, show an error -->
		<div class="row error-container">
			<div class="col-xs-12 text-center">
				<h1>Sorry, there was an error loading this quiz</h1>
				<h3>
					<!-- Offer a way back -->
					<button id="new-quiz-button" class="btn btn-lg sign-in-button">
							Make a new quiz
					</button>
				</h3>
			</div>
		</div>
		{{/if}}

		<div class="text-center">
		<br />
		<br />
		<br />
		<h3>Debug Info</h3>
			<p>
				p1_id: {{p1_id}}
				<br />
				p2_id: {{p2_id}}
				<br />
				{{#if serverError}}
					Error: {{serverError}}
					<br />
				{{/if}}

				That's all!
			</p>
		</div>
	</div>
</template>

<!-- The question template -->
<template name="questionTemplate">
<div class="row text-left">
	<!-- Use the result to style this template -->
	<div class="col-xs-12 question-container">
		<!-- Left and right nav buttons -->
		{{#if showLeftNav number}}
		<div class="question-nav question-nav-prev">
			<span class="glyphicon glyphicon-chevron-left">
			</span>
		</div>
		{{/if}}
		<div class="question-nav question-nav-next">
			<span class="glyphicon glyphicon-chevron-right">
			</span>
		</div>

		<div class="number-bubble">
			<span class="{{wasQuestionAnsweredCorrectly}}">{{number}}</span>
		</div>

		<div class="row">
			<div class="col-xs-10 col-xs-push-1 question-text">
				{{#markdown}}{{question}}{{/markdown}}
			</div>
		</div>

		<ul class="row row-eq-height list-inline list-group question-answers">
			<li class="col-xs-10 col-xs-push-1 list-group-item {{isAnswer 'a'}}" data-answer="a">
				<span>A</span> {{a}}
			</li>
			<li class="col-xs-10 col-xs-push-1 list-group-item {{isAnswer 'b'}}" data-answer="b">
				<span>B</span> {{b}}
			</li>
			<div class="clearfix visible-sm-block"></div>
			<li class="col-xs-10 col-xs-push-1 list-group-item {{isAnswer 'c'}}" data-answer="c">
				<span>C</span> {{c}}
				</li>
			<li class="col-xs-10 col-xs-push-1 list-group-item {{isAnswer 'd'}}" data-answer="d">
				<span>D</span> {{d}}
			</li>
		</ul>

		<!-- Hide the button until this question has been answered -->
		<div class="text-center {{#unless myProgress number}}transparent{{/unless}}">
			<button class="btn btn-lg next-question-button">
				Next Question
			</button>
		</div>

	</div>
</div>
</template>

<!-- The template for the final quiz card -->
<template name="quizEndCard">
<div class="row text-center">
	<div class="col-xs-12 question-container effect6">
		<!-- Left nav button -->
		<div class="question-nav question-nav-prev">
			<span class="glyphicon glyphicon-chevron-left">
			</span>
		</div>

		<span class="question-text">
			That's it!
		</span>

		<br />

		<button id="go-to-results-button" class="btn btn-lg next-question-button">
			See Results
		</button>
	</div>
</div>
</template>