<!-- The page served to the "/admin/questions/:subject/edit" route -->
<template name="adminQuestionEdit">
	<!-- Full page container -->
	<div class="full-page takeQuiz slate-background">

		{{#if this}}
		<div class="container">
			<!-- The saved marker container -->
			{{#if saved}}
			<div class="row">
				<div class="col-xs-10 col-xs-offset-1 text-center">
					<h2>Question Saved!</h2>
				</div>
			</div>
			{{/if}}

			<!-- Show the question in an editable, non-reactive way -->
			{{#with nonreactiveQuestion}}
			<div class="row">
				<div class="col-xs-10 col-xs-offset-1">
					<div class="admin-question-template" id="{{_id}}" contenteditable="true">

						<div class="row">
							<div class="col-xs-10 col-xs-push-1 question-text" data-question>
								{{question}}
							</div>
						</div>

						<div class="row">
							<ul class="list-inline list-group question-answers">
								<li class="col-xs-10 col-xs-push-1 list-group-item">
									<!-- Use <answer> just to seperate the text easily so we can select it for saving later -->
									<span>A</span><answer data-answer="a">{{a}}</answer>
								</li>
								<li class="col-xs-10 col-xs-push-1 list-group-item">
									<span>B</span><answer data-answer="b">{{b}}</answer>
								</li>
								<div class="clearfix visible-sm-block"></div>
								<li class="col-xs-10 col-xs-push-1 list-group-item">
									<span>C</span><answer data-answer="c">{{c}}</answer>
									</li>
								<li class="col-xs-10 col-xs-push-1 list-group-item">
									<span>D</span><answer data-answer="d">{{d}}</answer>
								</li>
							</ul>
						</div>

						<!-- TODO: Make this an input box to preserve the newlines correctly -->
						<div class="row">
							<div class="col-xs-10 col-xs-push-1 text-center">
								<h4>Short Explanation</h4>
							</div>
							<div class="col-xs-10 col-xs-push-1" data-short-explanation>
								{{short_explanation}}
							</div>
						</div>

						<div class="row">
							<div class="col-xs-10 col-xs-push-1 text-center">
								<h4>Long Explanation</h4>
							</div>
							<div class="col-xs-10 col-xs-push-1" data-long-explanation>
								{{long_explanation}}
							</div>
						</div>

						<div class="row" contenteditable="false">
							<div class="col-xs-10 col-xs-push-1 text-center">
								<button class="btn btn-lg save-button">Save</button>
							</div>
						</div>

					</div>
				</div>
			</div> <!-- /.row -->
			{{/with}}


			<!-- Show the preview -->
			<div class="row">
				<div class="col-xs-12 text-center">
					<h2>Preview (Save to Update)</h2>
				</div>
			</div>
			
			<div class="row">
				<div class="col-xs-10 col-xs-offset-1">
					<div class="admin-question-template">
						<div class="number-bubble">
							<span>1</span>
						</div>

						<div class="row">
							<div class="col-xs-10 col-xs-push-1 question-text">
								{{#markdown}}{{question}}{{/markdown}}
							</div>
						</div>

						<div class="row">
							<ul class="list-inline list-group question-answers">
								<li class="col-xs-10 col-xs-push-1 list-group-item">
									<!-- Use <answer> just to seperate the text easily so we can select it for saving later -->
									<span>A</span><answer>{{a}}</answer>
								</li>
								<li class="col-xs-10 col-xs-push-1 list-group-item">
									<span>B</span><answer>{{b}}</answer>
								</li>
								<div class="clearfix visible-sm-block"></div>
								<li class="col-xs-10 col-xs-push-1 list-group-item">
									<span>C</span><answer>{{c}}</answer>
									</li>
								<li class="col-xs-10 col-xs-push-1 list-group-item">
									<span>D</span><answer>{{d}}</answer>
								</li>
							</ul>
						</div>

						<div class="row">
							<div class="col-xs-10 col-xs-push-1 text-center">
								<h4>Short Explanation</h4>
							</div>
							<div class="col-xs-10 col-xs-push-1">
								{{#markdown}}{{short_explanation}}{{/markdown}}
							</div>
						</div>

						<div class="row">
							<div class="col-xs-10 col-xs-push-1 text-center">
								<h4>Long Explanation</h4>
							</div>
							<div class="col-xs-10 col-xs-push-1">
								{{#markdown}}{{long_explanation}}{{/markdown}}

							</div>
						</div>
					</div>
				</div> <!-- /.col-xs-10 -->
			</div> <!-- /.row -->

		</div> <!-- /.container -->

		{{else}}

		<!-- If there is no found question, show an error -->
		<div class="row error-container">
			<div class="col-xs-12 text-center">
				<h1>Sorry, that question could not be found</h1>
				<h3>Check that the question id in the URL is correct</h3>
			</div>
		</div>
		{{/if}}
	</div>
</template>